{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "YINI",
  "patterns": [
    { "include": "#comments" },
    { "include": "#section-header" },
    { "include": "#directive" },
    { "include": "#key-value" },
    { "include": "#quick-register" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.double-slash.yini",
          "match": "//.*$"
        },
        {
          "name": "comment.block.yini",
          "begin": "/\\*",
          "end": "\\*/"
        }
      ]
    },
    "section-header": {
      "patterns": [
        {
          "name": "meta.section.yini",
          "begin": "^\\s*(\\[)([^#])",
          "end": "(\\])",
          "beginCaptures": {
            "1": { "name": "punctuation.definition.section.begin.yini" },
            "2": { "name": "entity.name.section.yini" }
          },
          "endCaptures": {
            "1": { "name": "punctuation.definition.section.end.yini" }
          },
          "patterns": [
            {
              "name": "entity.name.section.yini",
              "match": "[^\\]:]+"
            },
            {
              "name": "keyword.operator.inheritance.yini",
              "match": ":"
            }
          ]
        }
      ]
    },
    "directive": {
      "patterns": [
        {
          "name": "meta.directive.yini",
          "match": "^\\s*(\\[)(#)(define|include|schema)(\\])",
          "captures": {
            "1": { "name": "punctuation.definition.directive.begin.yini" },
            "2": { "name": "punctuation.definition.directive.hash.yini" },
            "3": { "name": "keyword.control.directive.yini" },
            "4": { "name": "punctuation.definition.directive.end.yini" }
          }
        }
      ]
    },
    "key-value": {
      "patterns": [
        {
          "name": "meta.key-value.yini",
          "begin": "^\\s*([a-zA-Z_][a-zA-Z0-9_]*)\\s*(=)",
          "end": "$",
          "beginCaptures": {
            "1": { "name": "variable.other.key.yini" },
            "2": { "name": "keyword.operator.assignment.yini" }
          },
          "patterns": [
            { "include": "#value" }
          ]
        }
      ]
    },
    "quick-register": {
      "patterns": [
        {
          "name": "meta.quick-register.yini",
          "begin": "^\\s*(\\+=)",
          "end": "$",
          "beginCaptures": {
            "1": { "name": "keyword.operator.quick-register.yini" }
          },
          "patterns": [
            { "include": "#value" }
          ]
        }
      ]
    },
    "value": {
      "patterns": [
        { "include": "#number" },
        { "include": "#boolean" },
        { "include": "#string" },
        { "include": "#color" },
        { "include": "#builtin-type" },
        { "include": "#reference" },
        { "include": "#env-var" },
        { "include": "#array" },
        { "include": "#map" },
        { "include": "#set" },
        { "include": "#operators" }
      ]
    },
    "number": {
      "patterns": [
        {
          "name": "constant.numeric.float.yini",
          "match": "\\b[0-9]+\\.[0-9]+\\b"
        },
        {
          "name": "constant.numeric.integer.yini",
          "match": "\\b[0-9]+\\b"
        }
      ]
    },
    "boolean": {
      "patterns": [
        {
          "name": "constant.language.boolean.yini",
          "match": "\\b(true|false)\\b"
        }
      ]
    },
    "string": {
      "patterns": [
        {
          "name": "string.quoted.double.yini",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.yini",
              "match": "\\\\."
            }
          ]
        }
      ]
    },
    "color": {
      "patterns": [
        {
          "name": "constant.other.color.hex.yini",
          "match": "#[0-9A-Fa-f]{6}([0-9A-Fa-f]{2})?"
        }
      ]
    },
    "builtin-type": {
      "patterns": [
        {
          "name": "support.type.builtin.yini",
          "match": "\\b(Color|color|Coord|coord|Path|path|List|list|Array|array|Dyna|dyna)\\b"
        }
      ]
    },
    "reference": {
      "patterns": [
        {
          "name": "variable.other.reference.yini",
          "match": "@\\{[^}]+\\}"
        },
        {
          "name": "variable.other.reference.yini",
          "match": "@[a-zA-Z_][a-zA-Z0-9_]*"
        }
      ]
    },
    "env-var": {
      "patterns": [
        {
          "name": "variable.other.environment.yini",
          "match": "\\$\\{[^}]+\\}"
        }
      ]
    },
    "array": {
      "patterns": [
        {
          "name": "meta.array.yini",
          "begin": "\\[",
          "end": "\\]",
          "beginCaptures": {
            "0": { "name": "punctuation.definition.array.begin.yini" }
          },
          "endCaptures": {
            "0": { "name": "punctuation.definition.array.end.yini" }
          },
          "patterns": [
            { "include": "#value" },
            {
              "name": "punctuation.separator.array.yini",
              "match": ","
            }
          ]
        }
      ]
    },
    "map": {
      "patterns": [
        {
          "name": "meta.map.yini",
          "begin": "\\{",
          "end": "\\}",
          "beginCaptures": {
            "0": { "name": "punctuation.definition.map.begin.yini" }
          },
          "endCaptures": {
            "0": { "name": "punctuation.definition.map.end.yini" }
          },
          "patterns": [
            {
              "name": "meta.map.key-value.yini",
              "match": "([a-zA-Z_][a-zA-Z0-9_]*)\\s*(:)",
              "captures": {
                "1": { "name": "variable.other.key.yini" },
                "2": { "name": "punctuation.separator.key-value.yini" }
              }
            },
            { "include": "#value" },
            {
              "name": "punctuation.separator.map.yini",
              "match": ","
            }
          ]
        }
      ]
    },
    "set": {
      "patterns": [
        {
          "name": "meta.set.yini",
          "begin": "\\(",
          "end": "\\)",
          "beginCaptures": {
            "0": { "name": "punctuation.definition.set.begin.yini" }
          },
          "endCaptures": {
            "0": { "name": "punctuation.definition.set.end.yini" }
          },
          "patterns": [
            { "include": "#value" },
            {
              "name": "punctuation.separator.set.yini",
              "match": ","
            }
          ]
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.arithmetic.yini",
          "match": "[+\\-*/%]"
        }
      ]
    }
  },
  "scopeName": "source.yini"
}
